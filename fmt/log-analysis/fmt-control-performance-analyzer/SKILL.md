---
name: fmt-control-performance-analyzer
description: 基于已解码并完成分段的 FMT 飞行日志，对估计器/FMS/Controller 分层进行控制性能分析，提取振荡、超调、延迟、饱和等调参证据并形成候选根因的专用技能。用于调参前的证据分析，不负责最终报告排版或 mlog 解码。
---

# FMT Control Performance Analyzer

## 目标

在不跳过前置步骤的前提下，给出“现象 -> 证据 -> 候选根因”的分层控制分析结论。

## 前置输入（建议）

1. 已解码日志数据（结构化）
2. 已完成飞行阶段分段与关键事件索引
3. 机型变体信息（`vtol` / `mc` / `fw`）
4. 当前参数快照（来自 `mlog` header 或独立导出）

## 聚焦范围（只做这些）

1. 估计器侧与控制器侧问题分离（Estimator vs Controller）
2. 状态机切换瞬态与控制性能问题区分
3. 跟踪误差、超调、振荡、稳态误差、饱和等现象分析
4. 候选调参方向的证据提取（不是最终建议）

## 不负责

1. mlog 二进制解码
2. 飞行阶段分段
3. 最终报告与试飞计划编写

## 分析框架（建议顺序）

1. 先看数据质量与估计器健康（INS 有效性、跳变、延迟）
2. 再看 FMS 模式切换是否引入命令突变
3. 最后看 Controller 输出与执行器表现（含饱和、限幅）

## 典型输出结构

1. 现象清单（按严重度）
2. 每个现象的证据：
   - 时间段
   - 相关信号
   - 与阶段/模式的关系
3. 候选根因分层：
   - 估计器 / 状态机 / 控制器 / 执行器 / 传感器
4. 候选参数组（仅指出范围，不直接下最终改值）

## 输出要求

至少包含：

1. 分层分析结论（INS/FMS/Controller）
2. 关键现象与证据表
3. 候选根因列表（含置信度）
4. 候选参数范围（`CONTROL` / `FMS` / `INS`）
5. 需要补充的数据/试验（如无法定性）

## 纪律约束

1. 没有前置分段就不要直接给全局结论。
2. 避免将状态机切换瞬态误判为控制器增益问题。
3. 避免在缺失参数快照时给具体参数值建议。
